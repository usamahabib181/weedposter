/**
 *EasyEditor v2.0.0
 *
 *@author Mohamed Yousef <engineer.mohamed.yossef@gmail.com>
 *@license MIT
 *@copyright 2020 AGASHE
 */

!(function () {
    function t(t, e) {
        $(t).html("").html(e);
    }
    function e(e) {
        var l,
            n,
            o = "",
            a = "#ee-f-" + e.attr("id"),
            c = "#ee-t-" + e.attr("id");
        $(document).ready(function () {
            "" != e.val() && t(c, e.val());
        }),
            $(e).keyup(function (i) {
                t(c, e.val()),
                    $(this).scrollTop() + $(this).innerHeight() >= $(this)[0].scrollHeight && $(c).scrollTop(1e6);
            }),
            $(e).scroll(function () {
                $(this).scrollTop() + $(this).innerHeight() >= $(this)[0].scrollHeight
                    ? $(c).scrollTop(1e6)
                    : $(c).scrollTop($(this).scrollTop());
            }),
            $(e).select(function () {
                (l = this.selectionStart), (n = this.selectionEnd), (o = this.value.substring(l, n));
            }),
            $(a + " #ee-bold").click(function () {
                "" != o &&
                    null != o &&
                    (!(function (t, e, i, l) {
                        var n = "<b>" + t + "</b>";
                        l.val(l.val().replaceBetween(e, i, n));
                    })(o, l, n, e),
                        t(c, e.val()),
                        (o = ""));
            }),
            $(a + " #ee-italic").click(function () {
                "" != o &&
                    null != o &&
                    (!(function (t, e, i, l) {
                        var n = "<i>" + t + "</i>";
                        l.val(l.val().replaceBetween(e, i, n));
                    })(o, l, n, e),
                        t(c, e.val()),
                        (o = ""));
            }),
            $(a + " #ee-underline").click(function () {
                "" != o &&
                    null != o &&
                    (!(function (t, e, i, l) {
                        var n = "<u>" + t + "</u>";
                        l.val(l.val().replaceBetween(e, i, n));
                    })(o, l, n, e),
                        t(c, e.val()),
                        (o = ""));
            }),
            $(a + " #ee-left").click(function () {
                "" != o && null != o && (i(o, l, n, e, "left"), t(c, e.val()), (o = ""));
            }),
            $(a + " #ee-center").click(function () {
                "" != o && null != o && (i(o, l, n, e, "center"), t(c, e.val()), (o = ""));
            }),
            $(a + " #ee-right").click(function () {
                "" != o && null != o && (i(o, l, n, e, "right"), t(c, e.val()), (o = ""));
            }),
            $(a + " #ee-font").click(function () {
                $(".ee-fpanel").length > 0
                    ? $(".ee-fpanel").remove()
                    : (function (t) {
                        var e = "",
                            i = "",
                            l = "";
                        [
                            "Tahoma",
                            "Calibri",
                            "Times New Roman",
                            "Arial",
                            "Aharoni",
                            "Bodoni MT",
                            "Dotum",
                            "MS Outlook",
                            "Consolas",
                            "Gill Sans MT",
                            "Vladimir Script",
                            "Gigi",
                            "Elephant",
                            "Fira Code",
                            "Magneto",
                        ].forEach(function (t) {
                            e = e + "<option>" + t + "</option>";
                        }),
                            [
                                "Black",
                                "Red",
                                "Blue",
                                "Green",
                                "Yellow",
                                "Orange",
                                "Brown",
                                "Pink",
                                "Gray",
                                "SkyBlue",
                                "LimeGreen",
                                "SlateGray",
                            ].forEach(function (t) {
                                i = i + "<option>" + t + "</option>";
                            }),
                            [10, 11, 12, 14, 16, 18, 22, 24, 28, 32, 40, 60].forEach(function (t) {
                                l = l + "<option>" + t + "pt</option>";
                            });
                        var n =
                            "\t\t\t<div class='ee-fpanel'>\t\t\t\t<select id='ee-font-family' title='Font Family'>\t\t\t\t\t" +
                            e +
                            "\t\t\t\t</select>\t\t\t\t<select id='ee-font-size' title='Font Size'>\t\t\t\t\t" +
                            l +
                            "\t\t\t\t</select>\t\t\t\t<select id='ee-font-color' title='Font Color'>\t\t\t\t\t" +
                            i +
                            "\t\t\t\t</select>\t\t\t\t<button id='ee-font-ok'>Apply</button>\t\t\t</div>\t\t";
                        $(t).after(n);
                    })(this);
            }),
            $(e).click(function () {
                $(".ee-fpanel").remove();
            }),
            $(c).click(function () {
                $(".ee-fpanel").remove();
            }),
            $(document).on("click", a + " button#ee-font-ok", function () {
                "" != o &&
                    null != o &&
                    (!(function (t, e, i, l, n, o, a) {
                        var c =
                            "<span style='font-family:" +
                            n.toLowerCase() +
                            ";color:" +
                            o.toLowerCase() +
                            ";font-size:" +
                            a.toLowerCase() +
                            ";'>" +
                            t +
                            "</span>";
                        l.val(l.val().replaceBetween(e, i, c));
                    })(o, l, n, e, $("#ee-font-family").val(), $("#ee-font-color").val(), $("#ee-font-size").val()),
                        t(c, e.val()),
                        (o = ""));
            }),
            $(a + " #ee-link").click(function () {
                "" != o &&
                    null != o &&
                    (!(function (t, e, i, l) {
                        var n = '<a href="http://">' + t + "</a>";
                        l.val(l.val().replaceBetween(e, i, n));
                    })(o, l, n, e),
                        t(c, e.val()),
                        (o = ""));
            }),
            $(a + " #ee-image").click(function () {
                !(function (t, e) {
                    e.val(
                        e.val().substring(0, t) +
                        '<img src="http://" height="100" width="100" alt="" />' +
                        e.val().substring(t)
                    );
                })(e[0].selectionStart, e),
                    t(c, e.val());
            }),
            $(a + " #ee-list").click(function () {
                "" != o &&
                    null != o &&
                    (!(function (t, e, i, l) {
                        var n = "<ul>\n<li>" + t + "</li>\n</ul>";
                        l.val(l.val().replaceBetween(e, i, n));
                    })(o, l, n, e),
                        t(c, e.val()),
                        (o = ""));
            }),
            $(a + " #ee-code").click(function () {
                "" != o &&
                    null != o &&
                    (!(function (t, e, i, l) {
                        var n = "<code>" + t + "</code>";
                        l.val(l.val().replaceBetween(e, i, n));
                    })(o, l, n, e),
                        t(c, e.val()),
                        (o = ""));
            }),
            $(a + " #ee-quote").click(function () {
                "" != o &&
                    null != o &&
                    (!(function (t, e, i, l) {
                        var n = "<q>" + t + "</q>";
                        l.val(l.val().replaceBetween(e, i, n));
                    })(o, l, n, e),
                        t(c, e.val()),
                        (o = ""));
            }),
            $(a + " #ee-emoji").click(function () {
                !(function (t, e) {
                    e.val(e.val().substring(0, t) + "&#128515;" + e.val().substring(t));
                })(e[0].selectionStart, e),
                    t(c, e.val());
            }),
            $(a + " #ee-about").click(function () {
                window.open("https://github.com/agashe/EasyEditor", "_blank");
            });
    }
    function i(t, e, i, l, n) {
        var o = "";
        switch (n) {
            case "left":
                o = "<p style='text-align:left;'>" + t + "</p>";
                break;
            case "center":
                o = "<p style='text-align:center;'>" + t + "</p>";
                break;
            case "right":
                o = "<p style='text-align:right;'>" + t + "</p>";
        }
        l.val(l.val().replaceBetween(e, i, o));
    }
    (String.prototype.replaceBetween = function (t, e, i) {
        return this.substring(0, t) + i + this.substring(e);
    }),
        ($.fn.EasyEditor = function () {
            return (
                (function (t) {
                    $("head").append(
                        "<link href='https://css.gg/css?=" +
                        [
                            "format-left",
                            "format-center",
                            "format-right",
                            "format-color",
                            "format-bold",
                            "format-italic",
                            "format-underline",
                            "layout-list",
                            "link",
                            "image",
                            "code-slash",
                            "quote-o",
                            "smile-mouth-open",
                            "info",
                        ].join("|") +
                        "' rel='stylesheet'>"
                    );
                    var e = "ee-t-" + t.attr("id"),
                        i = "ee-f-" + t.attr("id"),
                        l = "<div class='ee-frame' id='" + i + "'><ul>";
                    (l += "<li title='Bold' id='ee-bold' class='no-right-padding'><i class='gg-format-bold'></i></li>"),
                        (l +=
                            "<li title='Italic' id='ee-italic' class='no-right-padding'><i class='gg-format-italic'></i></li>"),
                        (l +=
                            "<li title='Underline' id='ee-underline' class='right-space'><i class='gg-format-underline'></i></li>"),
                        (l +=
                            "<li title='Align Left' id='ee-left' class='adjust-button'><i class='gg-format-left'></i></li>"),
                        (l +=
                            "<li title='Align Center' id='ee-center' class='adjust-button'><i class='gg-format-center'></i></li>"),
                        (l +=
                            "<li title='Align Right' id='ee-right' class='right-space adjust-button'><i class='gg-format-right'></i></li>"),
                        (l +=
                            "<li title='Font' id='ee-font' class='right-space adjust-font-button'><i class='gg-format-color'></i></li>"),
                        (l += "<li title='Link' id='ee-link' class='adjust-font-button'><i class='gg-link'></i></li>"),
                        (l +=
                            "<li title='Image' id='ee-image' class='small-right-space top-space'><i class='gg-image'></i></li>"),
                        (l +=
                            "<li title='List Item' id='ee-list' class='right-space adjust-font-button'><i class='gg-layout-list'></i></li>"),
                        (l +=
                            "<li title='Code' id='ee-code' class='no-right-padding'><i class='gg-code-slash'></i></li>"),
                        (l += "<li title='Quote' id='ee-quote' class='top-space'><i class='gg-quote-o'></i></li>"),
                        (l +=
                            "<li title='Emoji' id='ee-emoji' class='no-top-space'><i class='gg-smile-mouth-open'></i></li>"),
                        (l +=
                            "<li title='About' id='ee-about' class='no-top-space about-button'><i class='gg-info'></i></li>"),
                        (l += "</ul></div>"),
                        (l += "<div class='ee-preview' id='" + e + "' title='Preview Window'></div>"),
                        t.height() < 300 && t.height(300),
                        t.width() < 500 && t.width(500),
                        t.addClass("ee-textbox"),
                        t.before(l),
                        $("#" + i).width(t.width()),
                        $("#" + e).width(t.width()),
                        $("#" + e).height(t.height() / 2),
                        t.height(t.height() / 2);
                })(this),
                e(this),
                this
            );
        });
})(jQuery);
